# Slasher Chain Information

* **Please vote yes on the `slasher` consumer chain proposal, and do not use the key assignment feature on the `slasher` chain.**
* We are launching the `slasher` chain with the goal of testing the slash rate limiter feature in the provider chain: this consumer chain will attempt to jail validators as soon as it receives the first ValidatorSetChange packet.

Contents

* [Status](#status)
* [Chain Data](#chain-data)

## Status

* Timeline
  * 2022-12-08: Spawn time: `2022-12-08T22:00:00.000000Z`
  * 2022-12-02: Proposal goes into voting period
  * 2022-12-02: Chain is initialized

`slasher` will launch as a consumer chain through a governance proposal in the `provider` chain. Read the [Consumer Chain Start Process](/docs/Consumer-Chain-Start-Process.md) page for more details about the workflow.

The following items will be included in the proposal:
* Genesis file hash
  * The SHA256 is used to verify against the genesis file that the proposer has made available for review.
  * This "fresh" genesis file cannot be used to run the chain: it must be updated with the CCV (Cross Chain Validation) state after the spawn time is reached.
* Reference binary hash
* Spawn time
  * Even if the proposal passes, the CCV state will not be available from the provider chain until after the spawn time is reached.

## Chain Data

### Binary

  * Repo: `sainoe/malicious-consumer` branch of [cosmos/interchain-security](https://github.com/cosmos/interchain-security/tree/sainoe/malicious-consumer)
  * Commit: [830218cebff472dba3c6ee62b1773ecc9defeae3](https://github.com/cosmos/interchain-security/commit/830218cebff472dba3c6ee62b1773ecc9defeae3)
  * Reference binary: [interchain-security-cd](interchain-security-cd), Linux amd64 build
    * SHA256: `28995d155deff625308d59da3814c02d1e802b67ac70a5302be38f844112fd97`

You can generate a binary following that repo's [build instructions](https://github.com/cosmos/interchain-security/tree/sainoe/malicious-consumer#instructions) or using one of these [bash scripts](#setup-bash-scripts).


### Genesis file

**The genesis file for Interchain Security consumer chains must include the CCV state generated by the provider chain _after_ the spawn time is reached.**

Final genesis file **with CCV state**: **[slasher-genesis.json](slasher-genesis.json)**
- SHA256: `2e47238fd745d635adcc1a18fb19e83ae21a5229a2499382b3a31729b4e16065`
- Validators must replace their `config/genesis.json` file with this one before running the binary.

The genesis file with was generated using the following settings:

* Chain ID: `slasher`
* Denom: `uslash`
* Signed blocks window: `"8640"`
* ~~Unbonding time: `"345600s"`~~
* Two genesis accounts have been added to fund a faucet and a relayer that will be run by the testnet coordinators.
* Genesis file **without CCV state**: [`slasher-fresh-genesis.json`](slasher-fresh-genesis.json)
  * SHA256: `2774b80ba952c816eee0a75e2b6e0d2a9d33bc654aa318771856d1331925e5c0`
  * **This is provided only for reviewing the proposal, this is not the genesis file validators should be running their nodes with.**

## Endpoints

* **p2p seeds: `7a86ddc92f56e77a26c4fb4d543412f7175a7c9b@slasher-seed.goc.earthball.xyz:26656`**
* **p2p persistent peers: `4b5cee15e6a9c4b96b8c1c4f396a18b0461edc17@slasher-coordinator.goc.earthball.xyz:26656,835173badfc41ecbd867a0395c6a452bda2bb90f@slasher-backup.goc.earthball.xyz:26656`**
* The `goc-coordinator` and `goc-backup` validator nodes will be running on the `slasher` chain within an hour after the genesis file that includes the CCV state has been published.
* Please keep in mind that any validator that does not come online after 67% of the voting power is up and running, is likely to be slashed for downtime, potentially resulting in being jailed (the `signed_blocks_window` parameter is set to `8640`).

## Setup Bash Scripts

On the node machine:
- Copy the `node_key.json` and `priv_validator_key.json` files for your validator.
  - **These should be the same ones as the ones from your provider node**.
- Run one of the following scripts:
  - slasher service: [slasher-init.sh](slasher-init.sh)
  - Cosmovisor service: [slasher-init-cv.sh](slasher-init-cv.sh)
- Wait until the spawn time is reached and the genesis file with the CCV state is available.
  - If you are updating the genesis file yourself, **make sure you set the `unbonding_time` field in the ccvconsumer params section to `"345600s"`**.
- Overwrite the genesis file with the one that includes the CCV state.
  - The default location is `$HOME/.slasher/config/genesis.json`.
- Enable and start the service:
  - slasher
    ```
    sudo systemctl enable slasher
    sudo systemctl start slasher
    ```
  - Cosmovisor
    ```
    sudo systemctl enable cv-slasher
    sudo systemctl start cv-slasher
    ```
- To follow the log, use:
  - slasher: `journalctl -fu slasher`
  - Cosmovisor: `journalctl -fu cv-slasher`
- If the log does not show up right away, run `systemctl restart systemd-journald`.
